---
import { SITE_TITLE } from '../../consts';
import { SOCIAL_MEDIA } from '../../consts';
import HeaderLink from './HeaderLink.astro';
import ThemeToggle from '../ui/button/ThemeToggle.astro';
import SocialLinks from './SocialLinks.astro';
---

<header class="bg-background text-foreground border-b sw-header">
    <nav class="mx-auto max-w-6xl px-4 py-2 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <a href="/"class="no-underline hover:opacity-90 flex items-center gap-2" href="/" aria-label="Home">
                <img src="/logoPersonal2.png?v=1" alt="" aria-hidden="true" width="50" height="50" />
            </a>
            <div class="internal-links hidden md:flex items-center gap-2 ml-1">
                <HeaderLink href="/" class="px-2 py-3 text-[color:var(--color-text-secondary)] no-underline">Home</HeaderLink>
                <HeaderLink href="/portfolio" class="px-2 py-3 text-[color:var(--color-text-primary)] no-underline">Portfolio</HeaderLink>
                
                <HeaderLink href="/contact" class="px-2 py-3 text-[color:var(--color-text-primary)] no-underline">Contact</HeaderLink>
              
            </div>
        </div>
        <div class="flex items-center gap-3">
            <div class="social-links hidden md:flex items-center gap-2">
                <SocialLinks></SocialLinks>
        </div>
        
            <ThemeToggle />
            <button type="button" aria-label="Open menu" aria-controls="mobile-menu" aria-expanded="false" data-menu-btn class="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-lg text-[color:var(--color-text-secondary)] hover:text-white">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true"><path fill="currentColor" d="M3 6h18v2H3V6Zm0 5h18v2H3v-2Zm0 5h18v2H3v-2Z"/></svg>
            </button>
        </div>
    </nav>
    <div id="mobile-menu" class="md:hidden hidden border-t">
        <div class="mx-auto max-w-6xl px-4 py-3 flex flex-col gap-2">
            <div class="flex flex-col">
                <HeaderLink href="/" class="px-2 py-3">Home</HeaderLink>
                <HeaderLink href="/portfolio" class="px-2 py-3">Portfolio</HeaderLink>
                <HeaderLink href="/contact" class="px-2 py-3">Contact</HeaderLink>
                
            </div>
            <div class="flex items-center gap-4 pt-2">
                <a href={SOCIAL_MEDIA.instagram} target="_blank" class="group text-[color:var(--color-text-secondary)]">
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-all duration-200 group-hover:text-[color:var(--accent-light)] group-hover:scale-110">
                    <path fill="currentColor" d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2Zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5a4.25 4.25 0 0 0 4.25-4.25v-8.5A4.25 4.25 0 0 0 16.25 3.5h-8.5Zm4.25 4a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5Zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5Zm5.75-.75a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5Z"/></svg>
                </a>
                <a href={SOCIAL_MEDIA.x} target="_blank" class="group text-[color:var(--color-text-secondary)]">
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-all duration-200 group-hover:text-[color:var(--accent-light)] group-hover:scale-110">
                    <path fill="currentColor" d="M18.146 3H21l-7.5 8.574L22.5 21h-6.297l-4.93-5.597L5.5 21H3l8.106-9.266L3 3h6.453l4.466 5.07L18.146 3Zm-1.103 16.2h1.705L7.05 4.64H5.272l11.771 14.56Z"/></svg>
                </a>
                <a href={SOCIAL_MEDIA.linkedin} target="_blank" class="group text-[color:var(--color-text-secondary)]">
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-all duration-200 group-hover:text-[color:var(--accent-light)] group-hover:scale-110">
                    <path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.327-.027-3.036-1.849-3.036-1.853 0-2.136 1.445-2.136 2.939v5.666H9.354V9h3.414v1.561h.049c.476-.9 1.637-1.849 3.37-1.849c3.604 0 4.268 2.372 4.268 5.455v6.285zM5.337 7.433a2.062 2.062 0 1 1 0-4.124a2.062 2.062 0 0 1 0 4.124zM7.119 20.452H3.554V9h3.565v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.225.792 24 1.771 24h20.451C23.2 24 24 23.225 24 22.271V1.729C24 .774 23.2 0 22.225 0z"/></svg>
                </a>
                <a href={SOCIAL_MEDIA.github} target="_blank" class="group text-[color:var(--color-text-secondary)]">
                    <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="transition-all duration-200 group-hover:text-[color:var(--accent-light)] group-hover:scale-110">
                    <path fill="currentColor" d="M12 .5C5.65.5.5 5.65.5 12c0 5.1 3.29 9.41 7.86 10.94.58.11.79-.25.79-.56v-2.03c-3.2.69-3.87-1.37-3.87-1.37-.53-1.36-1.3-1.72-1.3-1.72-1.06-.72.08-.71.08-.71 1.17.08 1.78 1.21 1.78 1.21 1.04 1.78 2.73 1.27 3.4.97.11-.75.41-1.27.74-1.56-2.55-.29-5.23-1.28-5.23-5.72 0-1.27.45-2.31 1.19-3.13-.12-.29-.52-1.46.11-3.05 0 0 .97-.31 3.18 1.19.92-.26 1.9-.39 2.88-.39.98 0 1.96.13 2.88.39 2.21-1.5 3.18-1.19 3.18-1.19.63 1.59.23 2.76.11 3.05.74.82 1.19 1.86 1.19 3.13 0 4.45-2.68 5.43-5.24 5.72.42.36.79 1.08.79 2.18v3.24c0 .31.21.67.8.56A11.51 11.51 0 0 0 23.5 12c0-6.35-5.15-11.5-11.5-11.5Z"/></svg>
                </a>
            </div>
        </div>
    </div>
</header>

<script is:inline>
  const btn = document.querySelector('[data-menu-btn]');
  const panel = document.getElementById('mobile-menu');
  function toggleMenu() {
    if (!panel || !btn) return;
    const isOpen = !panel.classList.contains('hidden');
    if (isOpen) {
      panel.classList.add('hidden');
      btn.setAttribute('aria-expanded', 'false');
    } else {
      panel.classList.remove('hidden');
      btn.setAttribute('aria-expanded', 'true');
    }
  }
  btn?.addEventListener('click', toggleMenu);
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') {
    if (!panel?.classList.contains('hidden')) toggleMenu();
  }});
  document.addEventListener('click', (e) => {
    if (!panel || !btn) return;
    const target = e.target;
    const clickedInside = panel.contains(target) || btn.contains(target);
    if (!clickedInside && !panel.classList.contains('hidden')) toggleMenu();
  });
</script>
